<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ATFDevice.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Digital</a> &gt; <a href="index.source.html" class="el_package">de.neemann.digital.builder.ATF150x</a> &gt; <span class="el_source">ATFDevice.java</span></div><h1>ATFDevice.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2018 Helmut Neemann
 * Use of this source code is governed by the GPL v3 license
 * that can be found in the LICENSE file.
 */
package de.neemann.digital.builder.ATF150x;

import de.neemann.digital.builder.ExpressionToFileExporter;
import de.neemann.digital.builder.tt2.StartATF150xFitter;
import de.neemann.digital.builder.tt2.TT2Exporter;

import javax.swing.*;
import java.util.Date;

/**
 * List of ATF150x devices and some helper functions.
 */
<span class="fc" id="L18">public enum ATFDevice {</span>

    //CHECKSTYLE.OFF: JavadocVariable
<span class="fc" id="L21">    ATF1502PLCC44(1502, 43, &quot;plcc44&quot;,</span>
            1, 2, 4, 5, 6, 8, 9, 11, 12, 14, 16, 17,
            18, 19, 20, 21, 24, 25, 26, 27, 28,
            29, 31, 33, 34, 36, 37, 38, 39, 40, 41, 43, 44),
<span class="fc" id="L25">    ATF1502TQFP44(1502, 37, &quot;t44&quot;, &quot;tqfp44&quot;,</span>
            2, 3, 5, 6, 8, 10, 11,
            12, 13, 14, 15, 18, 19, 20, 21, 22,
            23, 25, 27, 28, 30, 31, 33,
            34, 35, 37, 38, 39, 40, 42, 43, 44),
<span class="fc" id="L30">    ATF1504PLCC44(1504, 43, &quot;plcc44&quot;,</span>
            1, 2, 4, 5, 6, 8, 9, 11, 12, 14, 16, 17,
            18, 19, 20, 21, 24, 25, 26, 27, 28,
            29, 31, 33, 34, 36, 37, 38, 39, 40, 41, 43, 44),
<span class="fc" id="L34">    ATF1504TQFP44(1504, 37, &quot;t44&quot;, &quot;tqfp44&quot;,</span>
            2, 3, 5, 6, 8, 10, 11,
            12, 13, 14, 15, 18, 19, 20, 21, 22,
            23, 25, 27, 28, 30, 31, 33,
            34, 35, 37, 38, 39, 40, 42, 43, 44),
<span class="fc" id="L39">    ATF1504PLCC84(1504, 83, &quot;plcc84&quot;, new PL()</span>
<span class="fc" id="L40">            .pi(1, 84)</span>
<span class="fc" id="L41">            .e(14, 23, 62, 71)  //JTAG</span>
<span class="fc" id="L42">            .e(7, 19, 32, 42, 47, 59, 72, 82)//GND</span>
<span class="fc" id="L43">            .e(3, 43)//V_CCINT</span>
<span class="fc" id="L44">            .e(13, 26, 38, 53, 66, 78)//V_CCIO</span>
<span class="fc" id="L45">            .pins()),</span>
<span class="fc" id="L46">    ATF1504TQFP100(1504, 87, &quot;t100&quot;, &quot;tqfp100&quot;, new PL().</span>
<span class="fc" id="L47">            pi(1, 100)</span>
<span class="fc" id="L48">            .e(4, 15, 62, 73)  //JTAG</span>
<span class="fc" id="L49">            .e(11, 26, 38, 43, 59, 74, 86, 95)//GND</span>
<span class="fc" id="L50">            .e(39, 91)//V_CCINT</span>
<span class="fc" id="L51">            .e(3, 18, 34, 51, 66, 82)//V_CCIO</span>
<span class="fc" id="L52">            .e(1, 2, 5, 7, 22, 24, 27, 28, 49, 50, 53, 55, 70, 72, 77, 78) //NC</span>
<span class="fc" id="L53">            .pins()),</span>
<span class="fc" id="L54">    ATF1508PLCC84(1508, 81, &quot;plcc84&quot;,</span>
            4, 5, 6, 8, 9, 10, 11, 12,      // A
            15, 16, 17, 18, 20, 21, 22, 24, // B
            25, 27, 28, 29, 30, 31, 33, 34, // C
            35, 36, 37, 39, 40, 41, 44, 45, // D
            46, 48, 49, 50, 51, 52, 54, 55, // E
            56, 57, 58, 60, 61, 63, 64, 65, // F
            67, 68, 69, 70, 73, 74, 75, 76, // G
            77, 79, 80),                    // H
<span class="fc" id="L63">    ATF1508PQFP100(1508, 89, &quot;q100&quot;, &quot;pqfp100&quot;, new PL().</span>
<span class="fc" id="L64">            pi(1, 100)</span>
<span class="fc" id="L65">            .e(6, 17, 64, 75)//JTAG</span>
<span class="fc" id="L66">            .e(13, 28, 40, 45, 61, 76, 88, 97) // GND</span>
<span class="fc" id="L67">            .e(41, 93)//V_CCINT</span>
<span class="fc" id="L68">            .e(5, 20, 36, 53, 68, 84)//V_CCIO</span>
<span class="fc" id="L69">            .pins()),</span>
<span class="fc" id="L70">    ATF1508TQFP100(1508, 87, &quot;t100&quot;, &quot;tqfp100&quot;, new PL().</span>
<span class="fc" id="L71">            pi(1, 100)</span>
<span class="fc" id="L72">            .e(4, 15, 62, 73)//JTAG</span>
<span class="fc" id="L73">            .e(11, 26, 38, 43, 59, 74, 86, 95) // GND</span>
<span class="fc" id="L74">            .e(39, 91)//V_CCINT</span>
<span class="fc" id="L75">            .e(3, 18, 34, 51, 66, 82)//V_CCIO</span>
<span class="fc" id="L76">            .pins()),</span>
<span class="fc" id="L77">    ATF1508PQFP160(1508, 139, &quot;q160&quot;, &quot;pqfp160&quot;, new PL().</span>
<span class="fc" id="L78">            pi(1, 160)</span>
<span class="fc" id="L79">            .e(9, 22, 99, 112) //JTAG</span>
<span class="fc" id="L80">            .e(17, 42, 60, 66, 95, 113, 138, 148) // GND</span>
<span class="fc" id="L81">            .e(61, 143) //V_CCINT</span>
<span class="fc" id="L82">            .e(8, 26, 55, 79, 104, 133) //V_CCIO</span>
<span class="fc" id="L83">            .e(1, 2, 3, 4, 5, 6, 7, 34, 35, 36,</span>
                    37, 38, 39, 40, 44, 45, 46,
                    47, 74, 75, 76, 77, 81, 82,
                    83, 84, 85, 86, 87, 114,
                    115, 116, 117, 118, 119,
                    120, 124, 125, 126, 127,
                    154, 155, 156, 157) // NC
<span class="fc" id="L90">            .pins());</span>
    //CHECKSTYLE.ON: JavadocVariable

    private final int deviceNumber;
    private final String icPackage;
    private final String packageName;
    private final int clockPin;
    private final int[] pins;

    ATFDevice(int deviceNumber, int clockPin, String icPackage, int... ioPins) {
<span class="fc" id="L100">        this(deviceNumber, clockPin, icPackage, icPackage, ioPins);</span>
<span class="fc" id="L101">    }</span>

<span class="fc" id="L103">    ATFDevice(int deviceNumber, int clockPin, String icPackage, String packageName, int... ioPins) {</span>
<span class="fc" id="L104">        this.deviceNumber = deviceNumber;</span>
<span class="fc" id="L105">        this.icPackage = icPackage;</span>
<span class="fc" id="L106">        this.packageName = packageName;</span>
<span class="fc" id="L107">        this.clockPin = clockPin;</span>
<span class="fc" id="L108">        this.pins = ioPins;</span>
<span class="fc" id="L109">    }</span>

    private String getTT2DevName() {
<span class="fc" id="L112">        return &quot;f&quot; + deviceNumber + &quot;isp&quot; + icPackage;</span>
    }

    /**
     * @return the menu name of this device
     */
    public String getMenuName() {
<span class="nc" id="L119">        return &quot;ATF&quot; + deviceNumber + &quot;/&quot; + packageName.toUpperCase();</span>
    }

    private TT2Exporter getTT2Exporter(String projectName) {
<span class="nc" id="L123">        TT2Exporter tt2 = new TT2Exporter(projectName);</span>
<span class="nc" id="L124">        tt2.getPinMapping()</span>
<span class="nc" id="L125">                .setClockPin(clockPin)</span>
<span class="nc" id="L126">                .setAvailBidirectional(pins);</span>
<span class="nc" id="L127">        tt2.setDevice(getTT2DevName());</span>
<span class="nc" id="L128">        return tt2;</span>
    }

    private StartATF150xFitter getStartFitter(ATFDialog dialog) {
<span class="nc" id="L132">        return new StartATF150xFitter(dialog, deviceNumber);</span>
    }

    /**
     * creates a cupl exporter
     *
     * @return the cupl exporter
     */
    public ATF150xCuplExporter getCuplExporter() {
<span class="nc" id="L141">        return new ATF150xCuplExporter(getTT2DevName(), clockPin, pins);</span>
    }

    /**
     * creates a cupl exporter
     *
     * @param username the user name to put to the exporter
     * @param date     the date to set in the exporter
     * @return the cupl exporter
     */
    public ATF150xCuplExporter getCuplExporter(String username, Date date) {
<span class="fc" id="L152">        return new ATF150xCuplExporter(username, date, getTT2DevName(), clockPin, pins);</span>
    }

    /**
     * creates a ExpressionToFileExporter
     *
     * @param dialog      the dialog
     * @param projectName the project name
     * @return the exporter
     */
    public ExpressionToFileExporter createExpressionToFileExporter(JDialog dialog, String projectName) {
<span class="nc" id="L163">        ATFDialog d = new ATFDialog(dialog);</span>
<span class="nc" id="L164">        return new ExpressionToFileExporter(getTT2Exporter(projectName))</span>
<span class="nc" id="L165">                .addProcessingStep(getStartFitter(d))</span>
<span class="nc" id="L166">                .addProcessingStep(new CreateCHN(&quot;ATF&quot; + deviceNumber + &quot;AS&quot;, d));</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>